<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
</HEAD>

<BODY>
<H1>Programování pro X Window System (4)</H1>

<B>Martin Beran</B>
<EM>&lt;<A href="mailto:beran@ms.mff.cuni.cz">beran@ms.mff.cuni.cz</A>&gt;</EM>

<H2>Pøehled widgetù</H2>

<P>Dnes se podíváme, jaké widgety jsou v&nbsp;GTK+ k&nbsp;dispozici. Nebudeme se pøíli¹
pou¹tìt do podrobností, proto¾e tøídy widgetù mají èasto desítky metod a
podrobný výklad by byl pøíli¹ dlouhý a asi také dost nudný. Proto se zamìøíme
jen na nejdùle¾itìj¹í vlastnosti widgetù. Detaily je mo¾né nalézt v&nbsp;referenèní
dokumentaci GTK+. Ukázkové programy demonstrující jednotlivé widgety se dají
najít na <A href="http://www.gtk.org/">http://www.gtk.org/</A>. Dal¹í programy
jsou na adrese <A href="http://www.ms.mff.cuni.cz/~beran/vyuka/X/prog/gtk/">http://www.ms.mff.cuni.cz/~beran/vyuka/X/prog/gtk/</A>.

<P>Widget potøebuje X okno, aby mohl kreslit na obrazovku a pøijímat události.
Nìkteré widgety nepotøebují dostávat události od X serveru. Aby se ¹etøily
systémové zdroje X serveru, nemají takové widgety vlastní X okno a pro
kreslení pou¾ívají okno rodièovského widgetu. Pro testování, zda má widget
X okno, se pou¾ívá makro <TT>GTK_WIDGET_NO_WINDOW</TT>. Podobných maker pro
zji¹tìní vlastností widgetù existuje více. <TT>GTK_WIDGET_IS_SENSITIVE</TT>
testuje, jestli bude widget reagovat na podnìty u¾ivatele. Pøi programování
GUI je obvyklé, ¾e s&nbsp;prvky rozhraní, napø. polo¾kami menu, které odpovídají
doèasnì nepøístupným funkcím programu, nemù¾e u¾ivatel pracovat. Takové
widgety jsou i graficky odli¹eny, standardnì jsou zobrazeny nevýraznou ¹edou
barvou. Vypínat a zapínat interakci widgetu s&nbsp;u¾ivatelem umo¾òuje funkce
<TT>gtk_widget_set_sensitive</TT>. Chování widgetù ovlivòují je¹tì jiné
pøíznaky, napø. <EM>focus</EM> (widget bude dostávat vstup z&nbsp;klávesnice), nebo
<EM>default</EM> (widget zareaguje na klávesu <TT>Enter</TT>, i kdy¾ má focus
jiný widget, obvykle se pou¾ívá pro tlaèítko <TT>OK</TT> v&nbsp;dialogu). S&nbsp;pøíznaky
manipulují makra <TT>GTK_WIDGET_SET_FLAGS</TT> a 
<TT>GTK_WIDGET_UNSET_FLAGS</TT>.

<P>Témìø v&nbsp;ka¾dé aplikaci pou¾ívající GTK+ se vyskytují tlaèítka. Obyèejná
tlaèítka typu <TT>GtkButton</TT> se vyskytují pøedev¹ím v&nbsp;dialozích, slou¾í
pro uzavøení dialogu a potvrzení (OK), resp. zru¹ení (Cancel) nastavených
hodnot. Tlaèítko obvykle obsahuje nìjaký text nebo ikonu. Nicménì je to
kontejner &ndash; potomek <TT>GtkBin</TT> &ndash; proto mù¾e obsahovat
libovolný widget, napø. hbox s&nbsp;ikonou a textem. Tlaèítko s&nbsp;textem se vytvoøí
funkcí
<PRE>
GtkWidget* gtk_button_new_with_mnemonic(const gchar *label);
</PRE>
Znak, pøed kterým je v&nbsp;<TT>label</TT> podtr¾ítko '<TT>_</TT>', bude podtr¾ený
a bude fungovat jako akcelerátor (spolu s&nbsp;klávesou <TT>Alt</TT>). Pøi stisku
tlaèítko generuje signál <TT>"clicked"</TT>. Z&nbsp;obyèejného tlaèítka je odvozené
<TT>GtkToggleButton</TT>, které se pøepíná mezi dvìma stavy
(stisknuto/nestisknuto) a pøi tom generuje signál <TT>"toggled"</TT>. Aktuální
stav tlaèítka se dá zjistit pomocí <TT>gtk_toggle_button_get_toggled</TT> a
nastavit voláním <TT>gtk_toggle_button_set_toggled</TT>. Variantou toggle
button je <TT>GtkCheckButton</TT>, které se li¹í pouze vzhledem. Z&nbsp;nìho je
dále odvozené <TT>GtkRadioButton</TT>. Tento typ tlaèítek se pou¾ívá ve
skupinách propojených pomocí spojového seznamu <TT>GSList</TT> definovaného
v&nbsp;knihovnì GLib. V¾dy pouze jedno tlaèítko ze skupiny je aktivní. Vzhled
jednotlivých typù tlaèítek je vidìt na obr. 1. Tlaèítka
<TT>GtkRadioButton</TT> jsou na obrázku vlo¾ená ve vboxu a ten je
v&nbsp;<TT>GtkFrame</TT>, co¾ je kontejner zobrazující kolem vlo¾ených widgetù
rámeèek s&nbsp;nadpisem.

<DIV align="center">
<P><IMG alt="tlaèítka" src="buttons_frame.png">
<P>Obr. 1: Tlaèítka
</DIV>

<P>Obsah widgetu jako je velký obrázek, tabulka, nebo del¹í soubor v&nbsp;textovém
editoru se nezobrazí celý najednou. Pro rolování viditelné èásti obsahu se
pou¾ívá kontejner <TT>GtkScrolledWindow</TT>. Tento widget má automaticky
horizontální (<TT>GtkHScrollbar</TT>) a vertikální (<TT>GtkVScrollbar</TT>)
scrollbar. Nìkteré widgety, jako <TT>GtkTreeView</TT> nebo
<TT>GtkTextView</TT>, poèítají s&nbsp;podporou rolování a dají se do
<TT>GtkScrolledWindow</TT> vlo¾it pøímo funkcí <TT>gtk_container_add</TT>.
Jiné widgety, napø. <TT>GtkImage</TT>, nejsou pøipravené na rolování. Mezi
takový widget a <TT>GtkScrolledWindow</TT> je tøeba vlo¾it
<TT>GtkViewport</TT> voláním <TT>gtk_scrolled_window_add_with_viewport</TT>.
Tyto dvì metody nelze zamìòovat. Pokud bychom pro <TT>GtkTreeView</TT> pou¾ili
viewport, fungovalo by sice rolování seznamu, ale posunovaly by se i nadpisy
sloupcù, co¾ není moc vhodné. Widget <TT>GtkScrolledWindow</TT> s&nbsp;vlo¾eným
obrázkem typu <TT>GtkImage</TT> ukazuje obr. 2.

<DIV align="center">
<P><IMG alt="rolovací okno a obrázek" src="image.jpg">
<P>Obr. 2: <TT>GtkScrolledWindow</TT> obsahující <TT>GtkImage</TT>
</DIV>

<P>Pro komunikaci mezi scrollbary a scrolled window se pou¾ívá
<TT>GtkAdjustment</TT>. Není to widget, ale objekt, který udr¾uje parametry
pro rolování. Lze k&nbsp;nìmu pøipojit libovolný poèet rolovacích oken a
scrollbarù. Posun jednoho z&nbsp;nich zmìní polo¾ku <TT>value</TT> a zavolá
<TT>gtk_adjustment_value_changed</TT>. Tato funkce zpùsobí poslání signálu
<TT>"value_changed"</TT>. Signál dostanou ostatní widgety pøipojené
k&nbsp;adjustmentu a upraví svùj stav. Pøi zmìnì nìkteré jiné polo¾ky adjustmentu
&ndash; minimální nebo maximální hodnoty, øádkového posunu, stránkového posunu
nebo velikosti stránky &ndash; je tøeba volat <TT>gtk_adjustment_changed</TT>.
Tím se vygeneruje signál <TT>"changed"</TT> pro v¹echny widgety pøipojené
k&nbsp;adjustmentu. Podobné scrollbarùm jsou widgety <TT>GtkHScale</TT> a
<TT>GtkVScale</TT>. Pou¾ívají se pro nastavení nìjaké numerické hodnoty.
Aktuální hodnota a pøípustný interval jsou ulo¾ené v&nbsp;adjustmentu. Widgety typu
scrollbar a scale, v¹echny napojené na jeden adjustment, jsou na obr. 3.

<DIV align="center">
<P><IMG alt="scrollbar a scale" src="adjustment.png">
<P>Obr. 3: <TT>GtkScrollbar</TT> a <TT>GtkScale</TT>
</DIV>

<P>Jeden z&nbsp;nejjednodu¹¹ích widgetù je <TT>GtkLabel</TT> &ndash; statický text,
který neinteraguje s&nbsp;u¾ivatelem. Obvykle se pou¾ívá pro popisky polo¾ek
dialogù a jako souèást jiných widgetù, napø. nápisy na tlaèítkách
(<TT>GtkButton</TT>). Label mù¾e být i víceøádkový, s&nbsp;automatickým zalamováním
øádkù. V&nbsp;dialogových oknech se pro zadávání hodnot pou¾ívají kromì ji¾
zmínìných tlaèítek widgety typu <TT>GtkEntry</TT> pro vstup jednoho øádku
textu. Entry podporuje obvyklé editaèní klávesy, oznaèování textu a
cut&amp;paste pomocí my¹i. Ze základního <TT>GtkEntry</TT> je odvozený
<TT>GtkSpinButton</TT>. To je vstupní øádek specializovaný na zadávání
èísel. Pro ulo¾ení aktuální hodnoty a povoleného intervalu
pou¾ívá adjustment. Vedle editaèního øádku zobrazuje dvì ¹ipky, pomocí nich¾
je mo¾né hodnotu zvìt¹ovat nebo zmen¹ovat. Dal¹í variantou je
<TT>GtkCombo</TT>. V&nbsp;nìm lze kromì napsání textu z&nbsp;klávesnice vybírat
z&nbsp;rozbalovacího seznamu øetìzcù zadaného ve formì spojového seznamu
<TT>GList</TT>. Pøíkazem
<PRE>
gtk_entry_set_editable(GTK_ENTRY(GTK_COMBO(combo)->entry), FALSE);
</PRE>
se dá zakázat editace textu a povolit pouze hodnoty v&nbsp;seznamu. Alternativnì
lze pro výbìr øetìzce ze seznamu pou¾ít widget <TT>GtkOptionMenu</TT>. V&nbsp;nìm
se mo¾né hodnoty zadávají ve formì menu (<TT>GtkMenu</TT> pøipojené k&nbsp;widgetu
pomocí <TT>gtk_option_menu_set_menu</TT>). Obrázek 4 ukazuje widgety typu
entry, spin button, combo box a option menu.

<DIV align="center">
<P><IMG alt="entry, spin button, combo box, option menu" src="entry.png">
<P>Obr. 4: <TT>GtkEntry</TT>, <TT>GtkSpinButton</TT>, <TT>GtkCombo</TT> a
<TT>GtkOptionMenu</TT>
</DIV>

<P>Hlavní okno aplikace je obvykle widget typu <TT>GtkWindow</TT>. Window
manager k&nbsp;nìmu pøidá rámeèek, který okno zvýrazòuje a obsahuje ikony pro
zavøení, minimalizaci, maximalizaci, apod. Titulek v&nbsp;rámeèku okna se nastavuje
voláním <TT>gtk_window_set_title</TT>. V&nbsp;oknì je typicky vbox. Do jeho
horní èásti se umís»uje pruh menu (<TT>GtkMenuBar</TT>), pod nìj toolbar
(<TT>GtkToolbar</TT> v&nbsp;<TT>GtkHandleBox</TT>). Ve spodní èásti okna je
stavový øádek (<TT>GtkStatusbar</TT>). Na obr. 5 je pøíklad takto
koncipovaného hlavního okna aplikace, kde v&nbsp;hlavní èásti okna mezi
toolbarem a stavovým øádkem je textový editor <TT>GtkTextView</TT>.

<DIV align="center">
<P><IMG alt="hlavní okno aplikace" src="text_status.png">
<P>Obr. 5: Hlavní okno aplikace s&nbsp;menu, toolbarem, stavovým øádkem a textovým
editorem
</DIV>

<P>Menu je obvykle kombinace hlavního pruhu menu typu <TT>GtkMenuBar</TT>, pøi
výbìru nìkteré polo¾ky se rozbalí svislé menu <TT>GtkMenu</TT>. Struktura
rozbalovacích menu mù¾e mít více úrovní. Tøída <TT>GtkMenu</TT> se pou¾ívá i
pro kontextové popup menu, typicky aktivované pravým tlaèítkem my¹i, a jako
seznam polo¾ek v&nbsp;<TT>GtkOptionMenu</TT>. Struktura menu v&nbsp;aplikaci se dá
vygenerovat postupným vytváøením jednotlivých widgetù. Vodorovné menu vytvoøí 
<TT>gtk_menu_bar_new</TT>, jednotlivé jeho polo¾ky jsou typu
<TT>GtkMenuItem</TT> a pøidávají se pomocí
<TT>gtk_menu_item_new_with_mnemonic</TT> a <TT>gtk_menu_shell_append</TT>.
Svislé menu se vytváøí funkcí <TT>gtk_menu_new</TT>. Polo¾ky se do nìj
vkládají stejnì jako do <TT>GtkMenuBar</TT>. Pøipojení <TT>GtkMenu</TT>
k&nbsp;polo¾ce widgetu <TT>GtkMenuBar</TT> nebo k&nbsp;polo¾ce <TT>GtkMenu</TT> vy¹¹í
úrovnì zajistí funkce <TT>gtk_menu_item_set_submenu</TT>. Alternativní metodou
vytvoøení celé struktury menu je pou¾ití menu factory. V&nbsp;poli struktur
<TT>GtkItemFactoryEntry</TT> jsou definovány jednotlivé polo¾ky. Menu podle
této definice vygeneruje posloupnost volání funkcí
<PRE>
static GtkItemFactoryEntry items[] = { ... };
GtkWidget *window, *bar;
GtkItemFactory *factory;
GtkAccelGroup *accel;
accel = gtk_accel_group_new();
factory = gtk_item_factory_new(GTK_TYPE_MENU_BAR, "<MenuFactory>", accel);
gtk_item_factory_create_items(factory, sizeof(items)/sizeof(*items),
			      items, (gpointer)"callback_data");
gtk_window_add_accel_group(GTK_WINDOW(window), accel);
bar = gtk_item_factory_get_widget(factory, "<MenuFactory>");
</PRE>

<P>Do toolbaru se vkládají tlaèítka pro aktivaci nejpou¾ívanìj¹ích funkcí
programu. Ka¾dé tlaèítko obsahuje volitelnì text, ikonu, nebo oboje. Kromì
obyèejných tlaèítek se dají do toolbaru vlo¾it i toggle button, radio button,
nebo libovolný widget. V&nbsp;mnoha aplikacích se dá toolbar my¹í
&bdquo;utrhnout&ldquo; z&nbsp;okna. Odtr¾ený toolbar se stane samostatným top-level
oknem. Pøesunutím na pùvodní místo se toolbar pøipojí zpìt do okna. Tuto
funkci zaji¹»uje kontejner <TT>GtkHandleBox</TT>. Lze do nìj sice vlo¾it
jakýkoliv widget, ale obvykle se do nìj pøidává toolbar.

<P>Stavový øádek slou¾í k&nbsp;zobrazování rùzných zpráv pro u¾ivatele. Obsahuje
zásobník zpráv, v&nbsp;nìm¾ lze pøidávat a mazat. Zobrazena je v¾dy zpráva
na vrcholu zásobníku, tj. poslední vlo¾ená nesmazaná zpráva. Platí pravidlo,
¾e ve stavovém øádku se zobrazují ménì záva¾ná hlá¹ení, proto¾e je u¾ivatel
mù¾e snadno pøehlédnout. Pro dùle¾ité zprávy je lep¹í pou¾ít samostatné
modální dialogové okno.

<P>K prvkùm u¾ivatelského rozhraní je u¾iteèné pøidat <EM>tooltipy</EM>, tj.
krátké vysvìtlující texty zobrazované, kdy¾ se na widgetu po urèitou dobu
zastaví kurzor my¹i. Funkce <TT>gtk_tooltips_new</TT> vytvoøí skupinu
tooltipù typu <TT>GtkTooltips</TT>. Jednotlivé tooltipy pro rùzné widgety se
vytváøejí a pøidávají do skupiny pomocí <TT>gtk_tooltips_set_tip</TT>. Na obr.
6 je tooltip pøipojený k&nbsp;tlaèítku v&nbsp;toolbaru.

<DIV align="center">
<P><IMG alt="toolbar a tooltip" src="toolbartip.png">
<P>Obr. 6: Toolbar v&nbsp;handle boxu se zobrazeným tooltipem
</DIV>

<P>Pøi programování GUI platí zásada, ¾e kdy¾ program dìlá nìjakou déle
trvající akci a v&nbsp;jejím prùbìhu neinteraguje s&nbsp;u¾ivatelem, mìl by to dát
vizuálnì najevo. Pro operace o&nbsp;délce øádovì jednotky sekund se hodí zmìnit
kurzor na &bdquo;hodiny&ldquo;. Pro del¹í operace je lep¹í pou¾ít progress bar
<TT>GtkProgressBar</TT>. Ten ukazuje odhad, kolik u¾ je hotovo a kolik zbývá
do konce. Odhad by mìl být dostateènì pøesný. Velmi ¹patnì pùsobí, kdy¾ bìhem
2 sekund na progress baru naskoèí 98% a zbývající dvì procenta trvají pùl
hodiny. Kdy¾ nelze zbývající èas dostateènì správnì odhadnout, je lep¹í
progress bar pøepnout do &bdquo;activity mode&ldquo;. Pak se zobrazuje pouze
kmitající blok jako indikace, ¾e se stále nìco dìje a program nezamrzl. Obì
varianty progress baru jsou na obr. 7.

<DIV align="center">
<P><IMG alt="progress bar" src="progress.png">
<P>Obr. 7: Progress bar
</DIV>

<P>Pro zobrazení a editaci textu existuje v&nbsp;GTK+ widget <TT>GtkTextView</TT>.
GTK+ pou¾ívá internì pøi práci s&nbsp;textem Unicode v&nbsp;kódování UTF-8. V&nbsp;knihovnì
GLib jsou funkce pro pøekódování mezi UTF-8 a aktuálním locale. Text není
ulo¾en pøímo ve widgetu <TT>GtkTextView</TT>, ale je v&nbsp;samostatném objektu
typu <TT>GtkTextBuffer</TT>. Kromì tìchto dvou tøíd se pøi práci s&nbsp;textem
pou¾ívají je¹tì iterátory <TT>GtkTextIter</TT>, znaèky <TT>GtkTextMark</TT> a 
tagy <TT>GtkTextTag</TT>. Iterátor je ukazatel na znak pou¾ívaný pøi
rùzných operacích s&nbsp;textem. Dùle¾ité je, ¾e pøi jakékoliv zmìnì textu se
iterátor zneplatní. Naopak znaèka zùstává platná i po zmìnì obsahu textového
bufferu. Je to jakýsi virtuální, neviditelný kurzor. Znaèky mají jména,
<TT>"insert"</TT> je pozice viditelného kurzoru, <TT>"selection_bound"</TT> je
druhý konec vybrané èásti textu. Tag definuje atributy úseku textu, napø.
font, barvu písma nebo pozadí. Ukázka widgetu <TT>GtkTextView</TT> je na obr.
5.

<P>Widget <TT>GtkTreeView</TT> zobrazuje seznam &ndash; posloupnost øádkù,
data v&nbsp;øádcích jsou uspoøádána do sloupcù, v¹echny polo¾ky ve stejném sloupci
mají stejný typ. Stejný widget umí zobrazovat i stromovou strukturu, u¾ivatel
mù¾e pomocí my¹i otevírat jednotlivé úrovnì stromu. Zobrazování seznamù a
stromù je rozdìlené na ètyøi èásti. Hlavní je widget <TT>GtkTreeView</TT>.
K&nbsp;nìmu je pro ka¾dý sloupec vytvoøen objekt <TT>GtkTreeViewColumn</TT>, který
obsahuje informace o&nbsp;polo¾kách v&nbsp;tomto sloupci: nadpis sloupce, renderer a
specifikace polo¾ky (prvku datové struktury odpovídající celému øádku)
zobrazené ve sloupci. Renderer je potomek tøídy <TT>GtkCellRenderer</TT>. Umí
nakreslit jednu polo¾ku v&nbsp;jednom øádku. Model (<TT>GtkListStore</TT> nebo
<TT>GtkTreeStore</TT>) je datová struktura, v&nbsp;ní¾ jsou ulo¾ena data
urèená k&nbsp;zobrazení. Na obr. 8 je ukázka seznamu i stromu. Dva widgety
<TT>GtkTreeView</TT> jsou vlo¾eny v&nbsp;kontejneru <TT>GtkHPaned</TT>, jen¾
své dva synovské widgety zobrazuje v&nbsp;oddìlených panelech. Velikost panelù
mù¾e u¾ivatel mìnit posunem pøepá¾ky mezi nimi.

<DIV align="center">
<P><IMG alt="strom a seznam ve dvou panelech" src="tree_paned.png">
<P>Obr. 8: Strom a seznam <TT>GtkTreeView</TT> ve dvou panelech
<TT>GtkHPaned</TT>
</DIV>

<P>Zatím jsme se nezmínili o&nbsp;nìkolika u¾iteèných kontejnerových widgetech.
Jedním z&nbsp;nich je <TT>GtkEventBox</TT>. Pou¾ívá se v&nbsp;pøípadì, ¾e máme widget
bez X okna (napø. <TT>GtkLabel</TT>) a potøebujeme v&nbsp;nìm pøijímat události.
Øe¹ením je takový widget vlo¾it do event boxu, co¾ je widget, který sám o&nbsp;sobì
nic nedìlá, ale má X okno. Proto mù¾e dostávat události od X serveru. Pro
skupiny tlaèítek se pou¾ívají tøídy <TT>GtkHButtonBox</TT> a
<TT>GtkVButtonBox</TT>. Jsou to boxy, u&nbsp;kterých lze buï jednotlivì, nebo pro
v¹echny button boxy v&nbsp;celé aplikaci, nastavovat parametry pro rozmístìní
synovských widgetù. <TT>GtkAligment</TT> dovoluje pro synovský widget
nastavovat pozici a velikost relativnì vzhledem ke kontejneru.
<TT>GtkFixed</TT> slou¾í pro vkládání synovských widgetù na pevnì zadané
souøadnice. V&nbsp;dialogových oknech s&nbsp;mnoha polo¾kami se èasto pou¾ívá
<TT>GtkNotebook</TT>. Je to kolekce stránek se zálo¾kami. Kliknutím na zálo¾ku
lze vybrat urèitou stránku. Na obr. 9 je ukázka notebooku v&nbsp;dialogovém oknì,
kde v&nbsp;aktuálnì vybrané stránce je vlo¾en standardní widget
<TT>GtkColorSelection</TT> pro nastavení barvy.

<DIV align="center">
<P><IMG alt="notebook" src="notebook_dialog.png">
<P>Obr. 9: Kolekce stránek (<TT>GtkNotebook</TT>)
</DIV>

<P>Pro dialogová okna se pou¾ívá widget <TT>GtkDialog</TT>. Dialog je
top-level okno, proto je odvozen z&nbsp;<TT>GtkWindow</TT>. Dialogové okno má dvì
èásti oddìlené horizontální èárou (separátorem <TT>GtkHSeparator</TT>). Horní
èást (<TT>GtkDialog.vbox</TT>) je oblast pro vkládání widgetù pro zobrazení a
zadávání dat, jako jsou <TT>GtkEntry</TT>, <TT>GtkCheckButton</TT>, apod. Do
spodní èásti (<TT>GtkDialog.action_area</TT>) se vkládají tlaèítka pro
uzavøení dialogu, jako &bdquo;OK&ldquo;, &bdquo;Cancel&ldquo;,
&bdquo;Yes&ldquo; nebo &bdquo;No&ldquo;. Pokud jsou tlaèítka vlo¾ena pomocí
<TT>gtk_dialog_add_button</TT> nebo <TT>gtk_dialog_add_buttons</TT>,
vygeneruje stisk tlaèítka signál <TT>"response"</TT> s&nbsp;parametrem (response
ID) pøiøazeným tlaèítku pøi pøidání do dialogu. Enumerace
<TT>GtkResponseType</TT> definuje standardní hodnoty response. Dialogy jsou
<EM>modální</EM> nebo <EM>nemodální</EM>. Nemodální dialog je po vytvoøení
zobrazen stejnì jako normální top-level okno aplikace pomocí
<TT>gtk_widget_show_all</TT>. V&nbsp;handleru signálu <TT>"response"</TT> se pak
pøeètou hodnoty nastavené u¾ivatelem. Kdy¾ je na obrazovce nemodální dialog,
u¾ivatel mù¾e pracovat i s&nbsp;ostatními okny programu. S&nbsp;modálními dialogy se
pracuje pomocí funkce <TT>gtk_dialog_run</TT>.
<PRE>
resp = gtk_dialog_run(GTK_DIALOG(dialog));
switch(resp) {
case GTK_RESPONSE_NONE: ...
case GTK_RESPONSE_OK: /* pøeètení u¾ivatelem nastavených hodnot */
case GTK_RESPONSE_CANCEL: ...
case GTK_RESPONSE_DELETE_EVENT: ...
}
gtk_widget_destroy(dialog);
</PRE>
Volání <TT>gtk_dialog_run</TT> zobrazí dialog a spustí rekurzivnì cyklus
zpracování událostí <TT>gtk_main</TT>. Stisk nìkterého tlaèítka nebo zru¹ení
dialogu zpùsobí ukonèení rekurzivní instance <TT>gtk_main</TT> a návrat
z&nbsp;<TT>gtk_dialog_run</TT> s&nbsp;response ID odpovídajícím stisknutému tlaèítku.
Zatímco je modální dialog zobrazen, u¾ivatel nemù¾e pracovat s&nbsp;¾ádným jiným
top-level oknem programu. Výhoda modálních dialogù je, ¾e vytvoøení a
zobrazení dialogu, èekání na stisk tlaèítka a pøeètení u¾ivatelem nastavených
hodnot lze zabalit do jedné funkce. U&nbsp;nemodálního dialogu je potøeba na jednom
místì programu dialog zobrazit a jinde (v&nbsp;handleru signálu
<TT>"response"</TT>) pøeèíst hodnoty. Z&nbsp;pohledu programátora jsou modální
dialogy pohodlnìj¹í, nicménì pro u¾ivatele jsou omezující, proto¾e blokují
zbytek aplikace. Proto je vhodnìj¹í pou¾ívat spí¹e nemodální dialogy.
Pøíkladem situace, kdy je naopak lep¹í modální dialog, je zobrazení chybové
zprávy, u&nbsp;které chceme mít jistotu, ¾e ji u¾ivatel nepøehlédne.

<P>Seznam widgetù v&nbsp;tomto èlánku není vyèerpávající. V&nbsp;GTK+ jsou je¹tì dal¹í
widgety, jako standardní dialogy pro výbìr jmen souborù, barev nebo fontù.
Toolkit obsahuje také mnoho tøíd, z&nbsp;nich¾ se obvykle nevytváøí instance, ale
jsou to bázové tøídy pro widgety s&nbsp;podobnými vlastnostmi. Napøíklad
z&nbsp;<TT>GTKBox</TT> jsou odvozené <TT>GtkButtonBox</TT>, <TT>GtkHBox</TT> a
<TT>GtkVBox</TT>.
</BODY>
</HTML>
